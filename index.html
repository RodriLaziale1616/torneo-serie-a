<!DOCTYPE html>
<html lang="es">
<head>
  <link rel="stylesheet" href="styles.css">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Serie A - Club √Årea 1</title>
  <style>
    body { font-family: 'Montserrat', sans-serif; padding: 80px ; }
    h1, h2 { margin-top: 30px; background: #ADD8E688; color: blue; text-align: center; }
    table { border-collapse: collapse; width: 100%; margin-bottom: 20px; background: #ADD8E680; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
    th { background: #ffffff; }
    input { width: 40px; text-align: center; }
    .fixture-row { background: #ADD8E680; padding: 10px; margin: 5px 0; }
    .fixture-container { margin-top: 10px; }
  </style>
</head>
<body>

<h1>Serie A ‚Äì Club √Årea 1</h1>
<h2>Fixture</h2>


<div id="fixture" class="fixture-container" style="display: flex; gap: 20px;">
  <div id="fixture-ida" style="flex: 1;"></div>
  <div id="fixture-vuelta" style="flex: 1;"></div>
</div>

<h2>Tabla de posiciones</h2>
<table id="standings">
  <thead>
    <tr>
      <th>Pos</th><th>Equipo</th><th>PJ</th><th>PG</th><th>PE</th><th>PP</th>
      <th>GF</th><th>GC</th><th>DF</th><th>PTS</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<script>
const equipos = ["Lazio","Napoli","Roma","Udinese","Inter","Milan","Juventus","Sassuolo","Fiorentina"];

const fixture = [
  [1, "Inter", "Juventus", 3, 0],
  [1, "Napoli", "Lazio", 1, 0],
  [2, "Sassuolo", "Milan", 2, 2],
  [2, "Roma", "Fiorentina", 1, 5],
  [3, "Inter", "Udinese", 1, 2],
  [3, "Juventus", "Napoli", 0, 2],
  [4, "Lazio", "Sassuolo", null, null],
  [4, "Milan", "Roma", null, null],
  [5, "Fiorentina", "Udinese", null, null],
  [5, "Juventus", "Lazio", null, null],
  [6, "Napoli", "Sassuolo", null, null],
  [6, "Milan", "Roma", null, null],
  [7, "Inter", "Napoli", null, null],
  [7, "Lazio", "Milan", null, null],
  [8, "Sassuolo", "Fiorentina", null, null],
  [8, "Roma", "Udinese", null, null],
  [10, "Inter", "Lazio", null, null],
  [10, "Juventus", "Sassuolo", null, null],
  [11, "Napoli", "Milan", null, null],
  [11, "Lazio", "Roma", null, null],
  [12, "Milan", "Udinese", null, null],
  [12, "Inter", "Sassuolo", null, null],
  [13, "Napoli", "Roma", null, null],
  [13, "Lazio", "Fiorentina", null, null],
  [14, "Sassuolo", "Udinese", null, null],
  [14, "Juventus", "Milan", null, null],
  [15, "Napoli", "Fiorentina", null, null],
  [15, "Inter", "Roma", null, null],
  [16, "Inter", "Milan", null, null],
  [16, "Juventus", "Roma", null, null],
  [17, "Lazio", "Udinese", null, null],
  [17, "Juventus", "Fiorentina", null, null],
  [18, "Inter", "Fiorentina", null, null],
  [18, "Juventus", "Udinese", null, null],
  [19, "Napoli", "Udinese", null, null],
  [19, "Sassuolo", "Milan", null, null]
];

// Duplicar fixture para segunda ronda (fechas 20 a 38)
const segundaRonda = fixture
  .filter(p => p[0] <= 19)
  .map((p, idx) => {
    const [fecha, local, visita] = p;
    return [fecha + 19, visita, local, null, null];
  });

fixture.push(...segundaRonda); 
// cambios generados

const tabla = {};
equipos.forEach(e => tabla[e] = { PJ:0, PG:0, PE:0, PP:0, GF:0, GC:0, PTS:0 });

function actualizarTabla() {
  equipos.forEach(e => tabla[e] = { PJ:0, PG:0, PE:0, PP:0, GF:0, GC:0, PTS:0 });

  fixture.forEach((partido, idx) => {
    const [j, local, visita, gl, gv] = partido;
    if (gl === null || gv === null || gl === "" || gv === "") return;

    tabla[local].PJ++; tabla[visita].PJ++;
    tabla[local].GF += gl; tabla[local].GC += gv;
    tabla[visita].GF += gv; tabla[visita].GC += gl;

    if (gl > gv) {
      tabla[local].PG++; tabla[visita].PP++;
      tabla[local].PTS += 3;
    } else if (gl < gv) {
      tabla[visita].PG++; tabla[local].PP++;
      tabla[visita].PTS += 3;
    } else {
      tabla[local].PE++; tabla[visita].PE++;
      tabla[local].PTS += 1;
      tabla[visita].PTS += 1;
    }
  });

  const cuerpo = document.querySelector("#standings tbody");
  cuerpo.innerHTML = "";

  const orden = Object.entries(tabla)
    .map(([equipo, datos]) => ({equipo, ...datos, DF: datos.GF - datos.GC}))
    .sort((a, b) => b.PTS - a.PTS || b.DF - a.DF || b.GF - a.GF);

  orden.forEach((e, i) => {
    const row = `<tr>
      <td>${i+1}</td><td>${e.equipo}</td><td>${e.PJ}</td><td>${e.PG}</td><td>${e.PE}</td>
      <td>${e.PP}</td><td>${e.GF}</td><td>${e.GC}</td><td>${e.DF}</td><td>${e.PTS}</td>
    </tr>`;
    cuerpo.innerHTML += row;
  });
}

function crearFixture() {
  const contenedorIda = document.getElementById("fixture-ida");
  const contenedorVuelta = document.getElementById("fixture-vuelta");

  fixture.forEach((p, i) => {
    const [j, local, visita, gl, gv] = p;
    const div = document.createElement("div");
    div.className = "fixture-row";
    div.innerHTML = `J${j} ‚Äî ${local} <input type="number" id="gl${i}" value="${gl ?? ""}"> 
      - <input type="number" id="gv${i}" value="${gv ?? ""}"> ${visita}`;

    // A partir de la jornada 20, los partidos van en la segunda columna
    if (j <= 19) {
      contenedorIda.appendChild(div);
    } else {
      contenedorVuelta.appendChild(div);
    }

    document.getElementById(`gl${i}`).addEventListener("input", (e) => {
      fixture[i][3] = e.target.value === "" ? null : parseInt(e.target.value);
      actualizarTabla();
    });

    document.getElementById(`gv${i}`).addEventListener("input", (e) => {
      fixture[i][4] = e.target.value === "" ? null : parseInt(e.target.value);
      actualizarTabla();
    });
  });
}
crearFixture();
actualizarTabla();
</script>


<h2>Tabla de goleadores</h2>
<button onclick="agregarGoleador()">‚ûï A√±adir goleador</button>
<table id="goleadores">
  <thead>
    <tr><th>#</th><th>Jugador</th><th>Equipo</th><th>Goles</th><th></th></tr>
  </thead>
  <tbody></tbody>
</table>

<script>
// ================= GOLEADORES ===================
let goleadores = JSON.parse(localStorage.getItem("goleadoresSerieA") || "[]");

function guardarGoleadores() {
  localStorage.setItem("goleadoresSerieA", JSON.stringify(goleadores));
}

function actualizarGoleadores() {
  const cuerpo = document.querySelector("#goleadores tbody");
  cuerpo.innerHTML = "";
  goleadores.sort((a, b) => b.goles - a.goles);
  goleadores.forEach((g, i) => {
    const fila = document.createElement("tr");
    fila.innerHTML = `
      <td>${i + 1}</td>
      <td>${g.nombre}</td>
      <td>${g.equipo}</td>
      <td><input type="number" value="${g.goles}" data-idx="${i}" class="goles-input"></td>
      <td><button onclick="borrarGoleador(${i})">üóëÔ∏è</button></td>
    `;
    cuerpo.appendChild(fila);
  });

  document.querySelectorAll(".goles-input").forEach(input => {
    input.addEventListener("input", (e) => {
      const idx = e.target.dataset.idx;
      goleadores[idx].goles = parseInt(e.target.value) || 0;
      guardarGoleadores();
      actualizarGoleadores();
    });
  });
}

function agregarGoleador() {
  const nombre = prompt("Nombre del jugador:");
  if (!nombre) return;
  const equipo = prompt("Equipo:");
  if (!equipo) return;
  const goles = parseInt(prompt("¬øCu√°ntos goles lleva?", "0")) || 0;
  goleadores.push({ nombre, equipo, goles });
  guardarGoleadores();
  actualizarGoleadores();
}

function borrarGoleador(i) {
  if (confirm("¬øEliminar a este jugador?")) {
    goleadores.splice(i, 1);
    guardarGoleadores();
    actualizarGoleadores();
  }
}

// Inicializar
actualizarGoleadores();
</script>
</body>

</html>
