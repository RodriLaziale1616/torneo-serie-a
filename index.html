
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styles.css">
  <title>Serie A - Club √Årea 1</title>
  <style>
    body { font-family: 'Montserrat', sans-serif; padding: 80px; }
    h1, h2 { margin-top: 30px; background: #ADD8E688; color: blue; text-align: center; }
    table { border-collapse: collapse; width: 100%; margin-bottom: 20px; background: #ADD8E680; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
    th { background: #ffffff; }
    input { width: 40px; text-align: center; }
    .fixture-row { background: #ADD8E680; padding: 10px; margin: 5px 0; }
    .fixture-container { margin-top: 10px; }
  </style>
</head>
<body>

<h1>Serie A ‚Äì Club √Årea 1</h1>
<h2>Fixture</h2>

<div id="fixture" class="fixture-container" style="display: flex; gap: 20px;">
  <div id="fixture-ida" style="flex: 1;"></div>
  <div id="fixture-vuelta" style="flex: 1;"></div>
</div>

<h2>Tabla de posiciones</h2>
<table id="standings">
  <thead>
    <tr>
      <th>Pos</th><th>Equipo</th><th>PJ</th><th>PG</th><th>PE</th><th>PP</th>
      <th>GF</th><th>GC</th><th>DF</th><th>PTS</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<h2>Tabla de goleadores</h2>

<table id="goleadores">
  <thead>
    <tr><th>#</th><th>Jugador</th><th>Equipo</th><th>Goles</th><th></th></tr>
  </thead>
  <tbody></tbody>
</table>

<script>
const equipos = ["Lazio","Napoli","Roma","Udinese","Inter","Milan","Juventus","Sassuolo","Fiorentina"];
const fixture = [
  [1, "Inter", "Juventus", 3, 0],
  [1, "Napoli", "Lazio", 1, 0],
  [2, "Sassuolo", "Milan", 2, 2],
  [2, "Roma", "Fiorentina", 1, 5],
  [3, "Inter", "Udinese", 1, 2],
  [3, "Juventus", "Napoli", 0, 2],
  [4, "Lazio", "Sassuolo", null, null],
  [4, "Milan", "Roma", null, null],
  [5, "Fiorentina", "Udinese", null, null],
  [5, "Juventus", "Lazio", null, null],
  [6, "Napoli", "Sassuolo", null, null],
  [6, "Milan", "Roma", null, null],
  [7, "Inter", "Napoli", null, null],
  [7, "Lazio", "Milan", null, null],
  [8, "Sassuolo", "Fiorentina", null, null],
  [8, "Roma", "Udinese", null, null],
  [10, "Inter", "Lazio", null, null],
  [10, "Juventus", "Sassuolo", null, null],
  [11, "Napoli", "Milan", null, null],
  [11, "Lazio", "Roma", null, null],
  [12, "Milan", "Udinese", null, null],
  [12, "Inter", "Sassuolo", null, null],
  [13, "Napoli", "Roma", null, null],
  [13, "Lazio", "Fiorentina", null, null],
  [14, "Sassuolo", "Udinese", null, null],
  [14, "Juventus", "Milan", null, null],
  [15, "Napoli", "Fiorentina", null, null],
  [15, "Inter", "Roma", null, null],
  [16, "Inter", "Milan", null, null],
  [16, "Juventus", "Roma", null, null],
  [17, "Lazio", "Udinese", null, null],
  [17, "Juventus", "Fiorentina", null, null],
  [18, "Inter", "Fiorentina", null, null],
  [18, "Juventus", "Udinese", null, null],
  [19, "Napoli", "Udinese", null, null],
  [19, "Sassuolo", "Milan", null, null]
];

const segundaRonda = fixture.filter(p => p[0] <= 19).map(p => [p[0] + 19, p[2], p[1], null, null]);
fixture.push(...segundaRonda);

const tabla = {}; equipos.forEach(e => tabla[e] = { PJ:0, PG:0, PE:0, PP:0, GF:0, GC:0, PTS:0 });

function actualizarTabla() {
  equipos.forEach(e => tabla[e] = { PJ:0, PG:0, PE:0, PP:0, GF:0, GC:0, PTS:0 });
  fixture.forEach((p, idx) => {
    const [j, local, visita, gl, gv] = p;
    if (gl === null || gv === null || gl === "" || gv === "") return;
    tabla[local].PJ++; tabla[visita].PJ++;
    tabla[local].GF += gl; tabla[local].GC += gv;
    tabla[visita].GF += gv; tabla[visita].GC += gl;
    if (gl > gv) { tabla[local].PG++; tabla[visita].PP++; tabla[local].PTS += 3; }
    else if (gl < gv) { tabla[visita].PG++; tabla[local].PP++; tabla[visita].PTS += 3; }
    else { tabla[local].PE++; tabla[visita].PE++; tabla[local].PTS += 1; tabla[visita].PTS += 1; }
  });
  const cuerpo = document.querySelector("#standings tbody");
  cuerpo.innerHTML = "";
  const orden = Object.entries(tabla)
    .map(([equipo, datos]) => ({equipo, ...datos, DF: datos.GF - datos.GC}))
    .sort((a, b) => b.PTS - a.PTS || b.DF - a.DF || b.GF - a.GF);
  orden.forEach((e, i) => {
    cuerpo.innerHTML += `<tr><td>${i+1}</td><td>${e.equipo}</td><td>${e.PJ}</td><td>${e.PG}</td><td>${e.PE}</td>
      <td>${e.PP}</td><td>${e.GF}</td><td>${e.GC}</td><td>${e.DF}</td><td>${e.PTS}</td></tr>`;
  });
}

function crearFixture() {
  const ida = document.getElementById("fixture-ida");
  const vuelta = document.getElementById("fixture-vuelta");
  fixture.forEach((p, i) => {
    const [j, local, visita, gl, gv] = p;
    const div = document.createElement("div");
    div.className = "fixture-row";
    div.innerHTML = `J${j} ‚Äî ${local} <input type="number" disabled id="gl${i}" value="${gl ?? ""}"> 
      - <input type="number" disabled id="gv${i}" value="${gv ?? ""}"> ${visita}`;
    (j <= 19 ? ida : vuelta).appendChild(div);
    document.getElementById(`gl${i}`).addEventListener("input", e => {
      fixture[i][3] = e.target.value === "" ? null : parseInt(e.target.value);
      actualizarTabla();
    });
    document.getElementById(`gv${i}`).addEventListener("input", e => {
      fixture[i][4] = e.target.value === "" ? null : parseInt(e.target.value);
      actualizarTabla();
    });
  });
}
crearFixture();
actualizarTabla();

// GOLEADORES
let goleadores = JSON.parse(localStorage.getItem("goleadoresSerieA") || "[]");
function guardarGoleadores() { localStorage.setItem("goleadoresSerieA", JSON.stringify(goleadores)); }
function actualizarGoleadores() {
  const cuerpo = document.querySelector("#goleadores tbody");
  cuerpo.innerHTML = "";
  goleadores.sort((a, b) => b.goles - a.goles);
  goleadores.forEach((g, i) => {
    const fila = document.createElement("tr");
    fila.innerHTML = `<td>${i + 1}</td><td>${g.nombre}</td><td>${g.equipo}</td>
      <td><input type="number" disabled value="${g.goles}" data-idx="${i}" class="goles-input"></td>
      <td></td>`;
    cuerpo.appendChild(fila);
  });
  document.querySelectorAll(".goles-input").forEach(input => {
    input.addEventListener("input", e => {
      const idx = e.target.dataset.idx;
      goleadores[idx].goles = parseInt(e.target.value) || 0;
      guardarGoleadores(); actualizarGoleadores();
    });
  });
}
function agregarGoleador() {
  const nombre = prompt("Nombre del jugador:");
  if (!nombre) return;
  const equipo = prompt("Equipo:");
  if (!equipo) return;
  const goles = parseInt(prompt("¬øCu√°ntos goles lleva?", "0")) || 0;
  goleadores.push({ nombre, equipo, goles });
  guardarGoleadores(); actualizarGoleadores();
}
function borrarGoleador(i) {
  if (confirm("¬øEliminar a este jugador?")) {
    goleadores.splice(i, 1); guardarGoleadores(); actualizarGoleadores();
  }
}
actualizarGoleadores();
</script>

<h2>üîß Herramientas administrativas</h2>

<input type="file" id="importador" style="display:none" accept=".json" onchange="importarDatos(event)">


<script>
function exportarDatos() {
  const datos = {
    fixture: fixture,
    goleadores: goleadores
  };
  const blob = new Blob([JSON.stringify(datos)], {type: "application/json"});
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = "torneo_datos.json";
  a.click();
  URL.revokeObjectURL(url);
}

function importarDatos(event) {
  const archivo = event.target.files[0];
  if (!archivo) return;
  const lector = new FileReader();
  lector.onload = e => {
    const contenido = JSON.parse(e.target.result);
    if (contenido.fixture && contenido.goleadores) {
      contenido.fixture.forEach((p, i) => {
        if (fixture[i]) {
          fixture[i][3] = p[3];
          fixture[i][4] = p[4];
        }
      });
      goleadores = contenido.goleadores;
      guardarGoleadores();
      actualizarTabla();
      actualizarGoleadores();
      alert("Datos importados con √©xito.");
    } else {
      alert("Archivo inv√°lido.");
    }
  };
  lector.readAsText(archivo);
}
</script>
</body>
</html>
